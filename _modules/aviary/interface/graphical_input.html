
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>aviary.interface.graphical_input</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/aviary/interface/graphical_input';</script>
    <link rel="icon" href="../../../_static/aviary_logo.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/aviary.png" class="logo__image only-light" alt=" - Home"/>
    <script>document.write(`<img src="../../../_static/aviary.png" class="logo__image only-dark" alt=" - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Aviary Documentation
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/what_aviary_does.html">What Aviary Does</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/tools_that_aviary_uses.html">Tools That Aviary is Built Upon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/expected_user_knowledge.html">Expected User Knowledge</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../getting_started/onboarding.html">Onboarding Guide</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/onboarding_level1.html">Level 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/onboarding_level2.html">Level 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/onboarding_level3.html">Level 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/onboarding_ext_subsystem.html">Models with External Subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/input_csv_phase_info.html">Vehicle Input .csv File and Phase_info Dictionary</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/now_what.html">Now What?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../user_guide/user_interface.html">Aviary User Interface</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/UI_Levels.html">User Interface Levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/examples_of_the_same_mission_at_different_UI_levels.html">Examples of the same mission at different UI levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/aviary_commands.html">Command Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/input_files.html">Input Files</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/drawing_and_running_simple_missions.html">Drawing and running simple missions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/pre_mission_and_mission.html">Pre-Mission and Mission</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/postprocessing_and_visualizing_results.html">Postprocessing and Visualizing Results from Aviary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/variable_metadata.html">Understanding the Variable Metadata</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../user_guide/features_and_functionalities.html">Features and Functionalities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/aerodynamics.html">Aerodynamics Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/external_aero.html">Externally Computed Polars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/propulsion.html">Propulsion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/hamilton_standard.html">Hamilton Standard Propulsion Model</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/mass.html">Mass Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/subsystems.html">SubsystemBuilderBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/using_external_subsystems.html">Using external subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/step_by_step_external_guide.html">Step-by-step guide for creating, testing, and using external subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/battery_subsystem_example.html">In-depth look at the battery subsystem as an example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/features/overriding.html">Overriding Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/FLOPS_based_detailed_takeoff_and_landing.html">FLOPS Based Detailed Takeoff and Landing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/reserve_missions.html">Reserve Mission</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/SGM_capabilities.html">Key SGM Capabilities</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../examples/intro.html">Discussing the Aviary Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/simple_mission_example.html">Conventional Aircraft and Simple Mission</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/more_advanced_example.html">Optimizing the Mission Profile of a Conventional Aircraft</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/coupled_aircraft_mission_optimization.html">Coupled Aircraft-Mission Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/additional_flight_phases.html">Mission Optimization with Many Phases for a Commercial Aircraft</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/reserve_missions.html">Reserve Mission Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/OAS_subsystem.html">Using Aviary and OpenAeroStruct Together</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/level_2_detailed_takeoff_and_landing.html">Level 2 Detailed Takeoff and Landing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Theory Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../theory_guide/intro.html">Overview of Aviary Functionality</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../theory_guide/underlying_concepts.html">Underlying Concepts</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../theory_guide/assumptions.html">Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../theory_guide/aerodynamics.html">Core Aerodynamics Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../theory_guide/geometry.html">Core Geometry Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../theory_guide/mass.html">Core Mass Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../theory_guide/mission.html">Mission Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../theory_guide/propulsion.html">Core Propulsion Subsystem</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../theory_guide/optimization_algorithms.html">Optimization Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../theory_guide/validation.html">Validation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/codebase_overview.html">Codebase Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/coding_standards.html">Coding Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/unit_tests.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/contributing_guidelines.html">Guidelines for Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/how_to_contribute_docs.html">How to Contribute Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/debugging_env_from_github.html">Using Dev Environments from GitHub Actions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Miscellaneous Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../misc_resources/modeling_exercise.html">Modeling Exercise for the Usability Study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc_resources/FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc_resources/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc_resources/resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc_resources/externally_supported_subsystems.html">Externally Supported Subsystems</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../misc_resources/feature_comparison.html">Feature Comparison with Legacy Codes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../misc_resources/comparison_to_flops.html">Comparison to FLOPS</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc_resources/planned_future_features.html">Planned Future Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_srcdocs/index.html">Source Docs</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/openmdao/Aviary" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/openmdao/Aviary/issues/new?title=Issue%20on%20page%20%2F_modules/aviary/interface/graphical_input.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <h1>Source code for aviary.interface.graphical_input</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">importlib.util</span>  <span class="c1"># used for opening existing phase info file</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># used for unit conversion of numerical data</span>
<span class="kn">from</span> <span class="nn">openmdao.utils.units</span> <span class="kn">import</span> <span class="n">convert_units</span>

<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>  <span class="c1"># base tkinter</span>
<span class="kn">import</span> <span class="nn">tkinter.ttk</span> <span class="k">as</span> <span class="nn">ttk</span>  <span class="c1"># used for combobox</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">filedialog</span><span class="p">,</span> <span class="n">messagebox</span><span class="p">,</span> <span class="n">font</span>

<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_tkagg</span> <span class="kn">import</span> <span class="n">FigureCanvasTkAgg</span>
<span class="kn">from</span> <span class="nn">matplotlib.backend_bases</span> <span class="kn">import</span> <span class="n">MouseButton</span>


<div class="viewcode-block" id="get_screen_geometry">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.get_screen_geometry">[docs]</a>
<span class="k">def</span> <span class="nf">get_screen_geometry</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Taken from: https://stackoverflow.com/questions/3129322/how-do-i-get-monitor-resolution-in-python/56913005#56913005</span>
<span class="sd">    Workaround to get the size of the current screen in a multi-screen setup.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
    <span class="n">root</span><span class="o">.</span><span class="n">update_idletasks</span><span class="p">()</span>
    <span class="n">root</span><span class="o">.</span><span class="n">attributes</span><span class="p">(</span><span class="s1">&#39;-fullscreen&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">withdraw</span><span class="p">()</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">winfo_geometry</span><span class="p">()</span>
    <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">geometry</span></div>



<div class="viewcode-block" id="VerticalScrolledFrame">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.VerticalScrolledFrame">[docs]</a>
<span class="k">class</span> <span class="nc">VerticalScrolledFrame</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A pure Tkinter scrollable frame that actually works!</span>
<span class="sd">    * Use the &#39;interior&#39; attribute to place widgets inside the scrollable frame.</span>
<span class="sd">    * Construct and pack/place/grid normally.</span>
<span class="sd">    * This frame only allows vertical scrolling.</span>
<span class="sd">    ------</span>
<span class="sd">    Taken from https://stackoverflow.com/questions/16188420/tkinter-scrollbar-for-frame</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="VerticalScrolledFrame.__init__">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.VerticalScrolledFrame.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="c1"># Create a canvas object and a vertical scrollbar for scrolling it.</span>
        <span class="n">vscrollbar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scrollbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
        <span class="n">vscrollbar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1"># this frame will not scroll, allowing for freeze view functionality</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freezeframe</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freezeframe</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="c1"># another freeze frame at bottom for warnings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freezeframe_bottom</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freezeframe_bottom</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>

        <span class="n">canvas</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">highlightthickness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">yscrollcommand</span><span class="o">=</span><span class="n">vscrollbar</span><span class="o">.</span><span class="n">set</span><span class="p">)</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vscroll_canvas</span> <span class="o">=</span> <span class="n">canvas</span>
        <span class="n">vscrollbar</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="n">canvas</span><span class="o">.</span><span class="n">yview</span><span class="p">)</span>

        <span class="c1"># Reset the view</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">xview_moveto</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">yview_moveto</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Create a frame inside the canvas which will be scrolled with it.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interior</span> <span class="o">=</span> <span class="n">interior</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
        <span class="n">interior_id</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">interior</span><span class="p">,</span>
                                           <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>

        <span class="c1"># Track changes to the canvas and frame width and sync them,</span>
        <span class="c1"># also updating the scrollbar.</span>
        <span class="k">def</span> <span class="nf">_configure_interior</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="c1"># Update the scrollbars to match the size of the inner frame.</span>
            <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">interior</span><span class="o">.</span><span class="n">winfo_reqwidth</span><span class="p">(),</span> <span class="n">interior</span><span class="o">.</span><span class="n">winfo_reqheight</span><span class="p">())</span>
            <span class="n">canvas</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">scrollregion</span><span class="o">=</span><span class="s2">&quot;0 0 </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">size</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">interior</span><span class="o">.</span><span class="n">winfo_reqwidth</span><span class="p">()</span> <span class="o">!=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">():</span>
                <span class="c1"># Update the canvas&#39;s width to fit the inner frame.</span>
                <span class="n">canvas</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">interior</span><span class="o">.</span><span class="n">winfo_reqwidth</span><span class="p">())</span>
        <span class="n">interior</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Configure&gt;&#39;</span><span class="p">,</span> <span class="n">_configure_interior</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">_configure_canvas</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">interior</span><span class="o">.</span><span class="n">winfo_reqwidth</span><span class="p">()</span> <span class="o">!=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">():</span>
                <span class="c1"># Update the inner frame&#39;s width to fill the canvas.</span>
                <span class="n">canvas</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span><span class="n">interior_id</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">canvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">())</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Configure&gt;&#39;</span><span class="p">,</span> <span class="n">_configure_canvas</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="AviaryMissionEditor">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor">[docs]</a>
<span class="k">class</span> <span class="nc">AviaryMissionEditor</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">):</span>
<div class="viewcode-block" id="AviaryMissionEditor.__init__">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">screen_width</span><span class="p">,</span> <span class="n">screen_height</span> <span class="o">=</span> \
            <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">get_screen_geometry</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mission Design Utility&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_window</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Darwin&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_font</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">nametofont</span><span class="p">(</span><span class="s2">&quot;TkDefaultFont&quot;</span><span class="p">)</span>
        <span class="c1"># used by labels, buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_font</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">12</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="k">else</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">font</span><span class="o">.</span><span class="n">nametofont</span><span class="p">(</span><span class="s2">&quot;TkTextFont&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">size</span><span class="o">=</span><span class="mi">12</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="k">else</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># used by entries</span>

        <span class="c1"># ------</span>
        <span class="c1"># theme related initializations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theme</span> <span class="o">=</span> <span class="s2">&quot;light&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;light&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;background_primary&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffffff&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;foreground_primary&#39;</span><span class="p">:</span> <span class="s1">&#39;#000000&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;foreground_secondary&#39;</span><span class="p">:</span> <span class="s1">&#39;#999999&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;crosshair&#39;</span><span class="p">:</span> <span class="s1">&#39;#EE0000&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;lines&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;#0209c6&#39;</span><span class="p">,</span> <span class="s1">&#39;#aa00aa&#39;</span><span class="p">],</span>
                                  <span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="s1">&#39;dark_mode.png&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;hover&#39;</span><span class="p">:</span> <span class="s1">&#39;#63ebeb&#39;</span><span class="p">},</span>
                        <span class="s2">&quot;dark&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;background_primary&#39;</span><span class="p">:</span> <span class="s1">&#39;#1e1e1e&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;foreground_primary&#39;</span><span class="p">:</span> <span class="s1">&#39;#FEFEFE&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;foreground_secondary&#39;</span><span class="p">:</span> <span class="s1">&#39;#CCCCCC&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;crosshair&#39;</span><span class="p">:</span> <span class="s1">&#39;#EE0000&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;lines&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;#00b6f2&#39;</span><span class="p">,</span> <span class="s1">&#39;#ffff00&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="s1">&#39;light_mode.png&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;hover&#39;</span><span class="p">:</span> <span class="s1">&#39;#007acc&#39;</span><span class="p">}}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_combobox</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Style</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_combobox</span><span class="o">.</span><span class="n">theme_use</span><span class="p">(</span><span class="s2">&quot;alt&quot;</span><span class="p">)</span>
        <span class="c1"># updates image object inside pallete with PhotoImage object using absolute filepath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">theme_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">theme_info</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span>
                <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">source_directory</span><span class="p">,</span> <span class="s2">&quot;mac_theme.png&quot;</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="k">else</span> <span class="n">theme_info</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]))</span>
        <span class="c1"># stores/retrieves persistent settings in source directory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">persist_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_directory</span><span class="p">,</span> <span class="s2">&quot;persist_settings.json&quot;</span><span class="p">)</span>

        <span class="c1"># ------</span>
        <span class="c1"># window geometry definition</span>
        <span class="c1"># tkinter size string format:  widthxheight+x+y ;  x,y are location</span>
        <span class="c1"># Based on subplots, matplotlib will make window 500 in height regardless of initial size</span>
        <span class="c1"># A width of 800 is the minimum required to see the axes labels properly</span>
        <span class="c1"># The minimum sized is used unless the screen is large enough in which case 50% of width/height of</span>
        <span class="c1"># the screen is used as the size. If user saves settings then their last saved geometry is used.</span>
        <span class="n">min_win_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">900</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minsize</span><span class="p">(</span><span class="o">*</span><span class="n">min_win_size</span><span class="p">)</span>  <span class="c1"># force a minimum size for layout to look correct</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store_settings</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">()</span>  <span class="c1"># tracks if user wants to store settings or not</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">persist_filename</span><span class="p">):</span>
            <span class="c1"># a file will only exist if at a previous point user wanted to store settings</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store_settings</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">persist_filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
                <span class="n">persist_settings</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
                <span class="n">window_geometry</span> <span class="o">=</span> <span class="n">persist_settings</span><span class="p">[</span><span class="s1">&#39;window_geometry&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">theme</span> <span class="o">=</span> <span class="n">persist_settings</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default_win_size</span> <span class="o">=</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">min_win_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">screen_width</span><span class="o">/</span><span class="mi">2</span><span class="p">)),</span>
                                <span class="nb">max</span><span class="p">(</span><span class="n">min_win_size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">screen_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)))</span>
            <span class="n">default_location</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">screen_width</span><span class="o">-</span><span class="n">default_win_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">window_geometry</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">default_win_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">x</span><span class="si">{</span><span class="n">default_win_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">+&quot;</span> <span class="o">+</span>\
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">default_location</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">+</span><span class="si">{</span><span class="n">default_location</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="n">window_geometry</span><span class="p">)</span>

        <span class="c1"># Set the window icon, provides 2 sizes of logos to prevent blurry icons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iconphoto</span><span class="p">(</span>
            <span class="kc">False</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span>
                <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_directory</span><span class="p">,</span> <span class="s2">&quot;aviary_logo_16.png&quot;</span><span class="p">)),</span>
            <span class="n">tk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span>
                <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_directory</span><span class="p">,</span> <span class="s2">&quot;aviary_logo_32.png&quot;</span><span class="p">)))</span>

        <span class="c1"># ------</span>
        <span class="c1"># create window layout with frames for containing graph, table, and scrollbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span> <span class="o">=</span> <span class="n">VerticalScrolledFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_tableheaders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">freezeframe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_plot_table_border</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">highlightthickness</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_plot_table_border</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">frame_plotReadouts</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_plotReadouts</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_plots</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_plots</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">)</span>

        <span class="c1"># ------</span>
        <span class="c1"># Main definition of data which can be plotted/tabulated. Assumes single</span>
        <span class="c1"># independent variable followed by any number of dependent variables.</span>
        <span class="c1"># Plot titles inform the program of number of dependent variables.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;plot_titles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Altitude Profile&quot;</span><span class="p">,</span> <span class="s2">&quot;Mach Profile&quot;</span><span class="p">],</span>
                          <span class="s2">&quot;labels&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span> <span class="s2">&quot;Altitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Mach&quot;</span><span class="p">],</span>
                          <span class="s2">&quot;units&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;ft&quot;</span><span class="p">,</span> <span class="s2">&quot;unitless&quot;</span><span class="p">],</span>
                          <span class="s2">&quot;limits&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mf">50e3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
                          <span class="s2">&quot;rounding&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;constrain_range&quot;</span><span class="p">:</span> <span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="s2">&quot;solve_for_distance&quot;</span><span class="p">:</span> <span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">(),</span>
            <span class="s2">&quot;include_takeoff&quot;</span><span class="p">:</span> <span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">(),</span>
            <span class="s2">&quot;include_landing&quot;</span><span class="p">:</span> <span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">(),</span>
            <span class="s2">&quot;polynomial_control_order&quot;</span><span class="p">:</span> <span class="n">tk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">check_data_info</span><span class="p">()</span>  <span class="c1"># sanity checking of data_info dict</span>
        <span class="c1"># replace constants with stringvars which can be updated within the GUI by the user</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">,</span> <span class="s2">&quot;limits&quot;</span><span class="p">,</span> <span class="s2">&quot;rounding&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>
                                   <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span>

        <span class="c1"># starting mach is hardcoded as 0.3 b/c Aviary models are not suitable for very low mach</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_default</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># internal variables to remember mouse state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_drag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ptcontainer</span> <span class="o">=</span> <span class="mf">0.04</span>  <span class="c1"># percent of plot size, boundary around point where it can be dragged</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_optimize</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">()</span>  <span class="c1"># controls display of optimize phase checkboxes</span>
        <span class="c1"># controls display of phase info (climb/descent rates)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_phase_slope</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">theme_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                      <span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;image&quot;</span><span class="p">],</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span>
                                          <span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
                                      <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_theme</span><span class="p">(</span><span class="n">toggle</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="c1"># to prevent lose of image reference from garbage collector</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theme_button</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;image&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theme_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Enter&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_enter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theme_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Leave&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_leave</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theme_button</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;sw&#39;</span><span class="p">,</span> <span class="n">relx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rely</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">output_phase_info_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Output Phase Info&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_phase_info_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Enter&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_enter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_phase_info_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Leave&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_leave</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_phase_info_button</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">relx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rely</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_option_defaults</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_plots</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_menu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_theme</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">focus_force</span><span class="p">()</span>  <span class="c1"># focus the window</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.save_option_defaults">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.save_option_defaults">[docs]</a>
    <span class="k">def</span> <span class="nf">save_option_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves default values for advanced options and axes limits, these will be referenced</span>
<span class="sd">        if user chooses to reset advanced options or axes limits&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options_defaults</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options_defaults</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data_info_defaults</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;units&quot;</span> <span class="ow">or</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;limits&quot;</span> <span class="ow">or</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;rounding&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info_defaults</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">element</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">item</span><span class="p">]</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.check_data_info">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.check_data_info">[docs]</a>
    <span class="k">def</span> <span class="nf">check_data_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verifies data_info dict has consistent number of dependent variables &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;plot_titles&quot;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;plot_titles&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Check data_info dictionary, expected </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> elements inside </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.update_list">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.update_list">[docs]</a>
    <span class="k">def</span> <span class="nf">update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates internal data lists based on row,col values. col corresponds </span>
<span class="sd">            to dependent/independent variable. row corresponds to point number.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">point_warning_strvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Invalid table entry!&quot;</span><span class="p">)</span>
            <span class="k">return</span>  <span class="c1"># skip updating if value is not convertible to a float</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">point_warning_strvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Table entries must be positive values!&quot;</span><span class="p">)</span>
            <span class="k">return</span>  <span class="c1"># skip updating negative values</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># default lowest dymos phase transcription order value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_order_default</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">axis</span><span class="p">][</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_warning_strvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.update_theme">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.update_theme">[docs]</a>
    <span class="k">def</span> <span class="nf">update_theme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toggle</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called by theme toggle button and start of app, changes color settings for widgets </span>
<span class="sd">        based on current theme.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">toggle</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theme</span> <span class="o">=</span> <span class="s2">&quot;light&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">theme</span> <span class="o">==</span> <span class="s2">&quot;dark&quot;</span> <span class="k">else</span> <span class="s2">&quot;dark&quot;</span>

        <span class="c1"># this command sets options for all the widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tk_setPalette</span><span class="p">(</span>
            <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
            <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">],</span>
            <span class="n">insertBackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">],</span>
            <span class="n">highlightBackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
            <span class="n">highlightColor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
            <span class="n">activeForeground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">],</span>
            <span class="n">activeBackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
            <span class="n">selectColor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_menu</span><span class="p">()</span>  <span class="c1"># recreating menu b/c tkinter menus cannot be reconfigured with new colors</span>

        <span class="c1"># update table header color, different from background</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_tableheaders</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;hover&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_plot_table_border</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">highlightbackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_header_widgets</span><span class="p">:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;hover&quot;</span><span class="p">])</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">):</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">readonlybackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;hover&quot;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">:</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s1">&#39;foreground_secondary&#39;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]:</span>
                <span class="n">plot</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
                    <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">]:</span>
                <span class="n">plot</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="n">spine</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s1">&#39;foreground_secondary&#39;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">text_list</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">text_list</span><span class="p">:</span>
                <span class="n">text</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plot</span><span class="p">()</span>

        <span class="c1"># updating combobox colors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_add</span><span class="p">(</span><span class="s2">&quot;*TCombobox*Listbox*Background&quot;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_add</span><span class="p">(</span><span class="s2">&quot;*TCombobox*Listbox*Foreground&quot;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_add</span><span class="p">(</span><span class="s1">&#39;*TCombobox*Listbox*selectBackground&#39;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;hover&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_add</span><span class="p">(</span><span class="s1">&#39;*TCombobox*Listbox*selectForeground&#39;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_combobox</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="s1">&#39;TCombobox&#39;</span><span class="p">,</span> <span class="n">fieldbackground</span><span class="o">=</span><span class="p">[(</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_combobox</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="s1">&#39;TCombobox&#39;</span><span class="p">,</span> <span class="n">selectbackground</span><span class="o">=</span><span class="p">[(</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_combobox</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="s1">&#39;TCombobox&#39;</span><span class="p">,</span> <span class="n">selectforeground</span><span class="o">=</span><span class="p">[(</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_combobox</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="s1">&#39;TCombobox&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="p">[(</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;hover&quot;</span><span class="p">])])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_combobox</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="s1">&#39;TCombobox&#39;</span><span class="p">,</span> <span class="n">foreground</span><span class="o">=</span><span class="p">[(</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">theme_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;image&quot;</span><span class="p">],</span>
                                    <span class="n">bg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theme_button</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;image&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_phase_info_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">bg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
            <span class="n">fg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="s2">&quot;light&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
            <span class="p">[</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span><span class="p">:</span>  <span class="c1"># macOS does not support button background color change with Tkinter, so maintain foreground color</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_add_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="s2">&quot;light&quot;</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">):</span>
                    <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="s2">&quot;light&quot;</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span></div>


<span class="c1"># ----------------------</span>
<span class="c1"># Plot related functions</span>
<div class="viewcode-block" id="AviaryMissionEditor.create_plots">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.create_plots">[docs]</a>
    <span class="k">def</span> <span class="nf">create_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates subplots according to data_info dict. Sets labels and limits. </span>
<span class="sd">            Ties mouse events to appropriate internal functions.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plots</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;plot_titles&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crossX</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crossY</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosshair</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_axes</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_mouse_press</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_mouse_move</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_release_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_mouse_release</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_plots</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_coords_str</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Mouse Coordinates&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_coords</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frame_plotReadouts</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mouse_coords_str</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_coords</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosshair</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.update_axes">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.update_axes">[docs]</a>
    <span class="k">def</span> <span class="nf">update_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">plot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">units</span><span class="p">:</span>
                <span class="n">xlabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="n">ylabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">][</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">][</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="n">plot</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="n">ylabel</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limits</span><span class="p">:</span>
                <span class="n">xlim</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()))</span>
                <span class="n">ylim</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">][</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()))</span>
                <span class="n">plot</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="n">xlim</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="n">ylim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">refresh</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.redraw_plot">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.redraw_plot">[docs]</a>
    <span class="k">def</span> <span class="nf">redraw_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Redraws plot, using the new values inside data lists&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_plot</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">plot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">):</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span>
                      <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s1">&#39;lines&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
                      <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_phase_slope</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggle_phase_slope</span><span class="p">(</span><span class="n">redraw</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.clear_plot">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.clear_plot">[docs]</a>
    <span class="k">def</span> <span class="nf">clear_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears all lines from plots except for crosshairs&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">plot</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossX</span> <span class="ow">or</span> <span class="n">line</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossY</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">line</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span></div>


<span class="c1"># ----------------------</span>
<span class="c1"># Mouse related functions</span>
<div class="viewcode-block" id="AviaryMissionEditor.on_mouse_press">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.on_mouse_press">[docs]</a>
    <span class="k">def</span> <span class="nf">on_mouse_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handles mouse press event, sets internal mouse state&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.on_mouse_release">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.on_mouse_release">[docs]</a>
    <span class="k">def</span> <span class="nf">on_mouse_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handles release of mouse button. Calls click function if mouse has not been dragged.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_drag</span><span class="p">:</span>  <span class="c1"># simple click event</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">on_mouse_click</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># currently no functions operate at the end of drag</span>
        <span class="c1"># else: pass # drag event</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_drag</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.on_mouse_click">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.on_mouse_click">[docs]</a>
    <span class="k">def</span> <span class="nf">on_mouse_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called when mouse click is determined, adds new point if it is valid&quot;&quot;&quot;</span>
        <span class="c1"># this list creates default values for subplots not clicked on, half of ylim</span>
        <span class="n">default_y_vals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">lim</span><span class="o">.</span><span class="n">get</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span> <span class="k">for</span> <span class="n">lim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">:]]</span>
        <span class="n">valid_click</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># if mouse click points are not None</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="n">MouseButton</span><span class="o">.</span><span class="n">LEFT</span><span class="p">:</span>
            <span class="c1"># go through each subplot first to check if click is inside a subplot</span>
            <span class="k">for</span> <span class="n">plot_idx</span><span class="p">,</span> <span class="n">plot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">):</span>
                <span class="c1"># checks if mouse is inside subplot and it is the first point or next in time</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">==</span> <span class="n">plot</span> <span class="ow">and</span> <span class="p">(</span>
                        <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="o">&gt;</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span>
                    <span class="n">valid_click</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            <span class="c1"># once we know a subplot was clicked inside at a valid location</span>
            <span class="k">if</span> <span class="n">valid_click</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y_idx</span><span class="p">,</span> <span class="n">default_val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">default_y_vals</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span>
                        <span class="n">index</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                        <span class="n">axis</span><span class="o">=</span><span class="n">y_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
                        <span class="k">if</span> <span class="n">plot_idx</span> <span class="o">==</span> <span class="n">y_idx</span> <span class="k">else</span> <span class="n">default_val</span><span class="p">)</span>
                <span class="n">valid_click</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1"># update plots and tables after having changed the lists</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.on_mouse_move">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.on_mouse_move">[docs]</a>
    <span class="k">def</span> <span class="nf">on_mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handles functionality related to mouse movement. Creates crosshair if mouse is inside</span>
<span class="sd">            a subplot and updates cursor if near a point that can be dragged. Also handles moving</span>
<span class="sd">            point on graph if it is being dragged.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">plot_idx</span><span class="p">,</span> <span class="n">plot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">==</span> <span class="n">plot</span><span class="p">:</span>
                    <span class="c1"># create crosshair at current point and remove old crosshair</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosshair</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">crossX</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">crossY</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crossX</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s1">&#39;crosshair&#39;</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crossY</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span>
                        <span class="n">x</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s1">&#39;crosshair&#39;</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crosshair</span> <span class="o">=</span> <span class="kc">True</span>

                    <span class="c1"># update mouse coordinates on screen, rounding is handled based on</span>
                    <span class="c1"># rounding defined in data_info</span>
                    <span class="n">xvalue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_rounding</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">yvalue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_rounding</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">,</span> <span class="n">plot_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mouse_coords_str</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">xvalue</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2"> | &quot;</span> <span class="o">+</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">][</span><span class="n">plot_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">yvalue</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">][</span><span class="n">plot_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="c1"># check if mouse is near an existing point, use closest point for dragging</span>
                    <span class="n">near</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">dists</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">existing_pt</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">plot_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]):</span>
                            <span class="n">dists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_distance</span><span class="p">(</span>
                                <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">),</span> <span class="n">existing_pt</span><span class="p">,</span> <span class="n">plot_idx</span><span class="p">))</span>
                        <span class="n">min_dist</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">min_dist</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ptcontainer</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
                            <span class="n">near</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">near_idx</span> <span class="o">=</span> <span class="n">dists</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">min_dist</span><span class="p">)</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">near</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

                    <span class="c1"># move nearby point (or if previously dragging a point)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span> <span class="ow">and</span> <span class="p">(</span><span class="n">near</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_drag</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_drag</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">near_idx</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">near_idx</span><span class="p">,</span>
                                         <span class="n">axis</span><span class="o">=</span><span class="n">plot_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>

            <span class="c1"># redraw plot after looping through subplots</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_str_vars</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.get_distance">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.get_distance">[docs]</a>
    <span class="k">def</span> <span class="nf">get_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt1</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">pt2</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">plot_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a normalized distance value between 2 points. Normalization is based on the subplot&#39;s</span>
<span class="sd">        x and y limits, subplot specified as plot_idx&quot;&quot;&quot;</span>
        <span class="n">lims</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="n">plot_idx</span><span class="p">]</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="n">plot_idx</span><span class="p">]</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">sum</span><span class="p">([((</span><span class="n">pt1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">pt2</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">/</span><span class="n">lims</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]))</span></div>


<span class="c1"># ----------------------</span>
<span class="c1"># Table related functions</span>
<div class="viewcode-block" id="AviaryMissionEditor.update_str_vars">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.update_str_vars">[docs]</a>
    <span class="k">def</span> <span class="nf">update_str_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates StringVar values for the table. Used when points are dragged on plot&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">vallist</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">vallist</span><span class="p">):</span>
                <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_rounding</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_strvars</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.delete_point">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.delete_point">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;When X button next to tabular point is pressed, lists are popped and plot and tables</span>
<span class="sd">        are updated to show the removed point.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">and</span> <span class="n">row</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plot</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.update_table">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.update_table">[docs]</a>
    <span class="k">def</span> <span class="nf">update_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bool_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function handles both adding a new entry to table and overwriting the whole table.</span>
<span class="sd">        Overwriting causes all table widgets to be destroyed and a new set of widgets to be created.</span>
<span class="sd">        This also resets the StringVars.&quot;&quot;&quot;</span>
        <span class="n">row</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span>  <span class="c1"># last row (assumes data lists have been updated with new point)</span>
        <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_strvars</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">)]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># set row to 0 if overwriting entire table</span>

        <span class="k">while</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">and</span> <span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># numerical label for each point</span>
            <span class="n">rowtxt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">rowtxt</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span><span class="o">+</span><span class="n">rowtxt</span>
            <span class="n">rownum_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">interior</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">rowtxt</span><span class="p">,</span>
                <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">rownum_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rownum_label</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">row</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_optimize</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>  <span class="c1"># have at least 2 points</span>
                <span class="n">optimize_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">interior</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Optimize:&quot;</span><span class="p">,</span>
                    <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                    <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
                <span class="n">optimize_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">optimize_label</span><span class="p">)</span>

            <span class="c1"># entries and stringvars for each x,y value</span>
            <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="n">data_axis</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">data_axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">]):</span>
                <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_rounding</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
                <span class="n">entry_text</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_strvars</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry_text</span><span class="p">)</span>

                <span class="n">entry</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">interior</span><span class="p">,</span>
                                 <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">table_column_widths</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
                                 <span class="n">textvariable</span><span class="o">=</span><span class="n">entry_text</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                                 <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                                 <span class="p">[</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                                 <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                                 <span class="p">[</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
                <span class="n">entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="c1"># binds key release to update list function</span>
                <span class="n">entry</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;KeyRelease&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">entry_text</span><span class="o">=</span><span class="n">entry_text</span><span class="p">:</span> <span class="p">[</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">entry_text</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span> <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plot</span><span class="p">()])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">col</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">row</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_optimize</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>  <span class="c1"># have at least 2 points and for dependent var cols only</span>
                    <span class="n">checkbox_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">interior</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">][</span><span class="n">col</span><span class="p">],</span>
                        <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                        <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
                    <span class="n">checkbox_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">checkbox_label</span><span class="p">)</span>

                    <span class="n">optimize_variable</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span><span class="p">[</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">optimize_variable</span><span class="p">)</span>
                    <span class="c1"># if bool list has already been populated (e.g. opening an existing phase info)</span>
                    <span class="k">if</span> <span class="n">bool_list</span><span class="p">:</span>
                        <span class="n">optimize_variable</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">bool_list</span><span class="p">[</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">optimize_checkbox</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Checkbutton</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">interior</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="n">optimize_variable</span><span class="p">,</span>
                        <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                        <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">],</span>
                        <span class="n">activebackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                        <span class="p">[</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                        <span class="n">activeforeground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                        <span class="p">[</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">],</span>
                        <span class="n">selectcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                        <span class="n">highlightbackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                        <span class="p">[</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                        <span class="n">highlightcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
                    <span class="n">optimize_checkbox</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">optimize_checkbox</span><span class="p">)</span>

            <span class="c1"># delete button for each point</span>
            <span class="n">delete_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">interior</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">delete_button_width</span><span class="p">,</span>
                <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_font</span><span class="o">.</span><span class="n">actual</span><span class="p">()[</span><span class="s2">&quot;size&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span><span class="p">),</span>
                <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="s2">&quot;light&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                <span class="p">[</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">delete_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Button-1&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete_point</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>
            <span class="n">delete_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Enter&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_enter</span><span class="p">)</span>
            <span class="n">delete_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Leave&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_leave</span><span class="p">)</span>
            <span class="n">delete_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">col</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">delete_button</span><span class="p">)</span>

            <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># reposition add new point button based on updated table</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_add_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="n">col</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.update_header">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.update_header">[docs]</a>
    <span class="k">def</span> <span class="nf">update_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_headers</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_header_widgets</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">):</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">textvariable</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">new_headers</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.add_new_row">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.add_new_row">[docs]</a>
    <span class="k">def</span> <span class="nf">add_new_row</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates data lists with a generic new point and runs redraw plot and update table.</span>
<span class="sd">            New point is added at x = halfway between last point and x limit, y = half of y limit&quot;&quot;&quot;</span>
        <span class="n">default_y_vals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">lim</span><span class="o">.</span><span class="n">get</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span> <span class="k">for</span> <span class="n">lim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">:]]</span>
        <span class="n">newx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">newx</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="o">-</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="n">newx</span><span class="p">,</span> <span class="o">*</span><span class="n">default_y_vals</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plot</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.create_table">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.create_table">[docs]</a>
    <span class="k">def</span> <span class="nf">create_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates headers for table and sets column widths based on header lengths.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_column_widths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_strvars</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list used to hold StringVars</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widgets</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list used to hold graphical table elements, can be used to modify them</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_header_widgets</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list used to hold header widgets, referenced for theme changes</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_tableheaders</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Pt&quot;</span><span class="p">)</span>
        <span class="n">header</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_header_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">])):</span>
            <span class="n">header_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="n">header_text</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">header_str</span><span class="p">)</span>
            <span class="n">header_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header_str</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.75</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="k">else</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_tableheaders</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">header_text</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;readonly&#39;</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="n">header_width</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="s1">&#39;groove&#39;</span><span class="p">)</span>
            <span class="n">header</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_column_widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">header_width</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_strvars</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
            <span class="k">if</span> <span class="n">col</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_header_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>

        <span class="c1"># this spacer prevents invisbility of delete buttons after all of them have been deleted and a new point is added</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_button_width</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="k">else</span> <span class="mi">4</span>
        <span class="n">delete_button_spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frame_tableheaders</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">delete_button_width</span><span class="p">)</span>
        <span class="n">delete_button_spacer</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">col</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_header_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">delete_button_spacer</span><span class="p">)</span>

        <span class="c1"># button for adding new rows to table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_add_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">interior</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Add New Point&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">add_new_row</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_add_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Enter&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_enter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_add_button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Leave&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_leave</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">point_warning_strvar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_warning</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_table</span><span class="o">.</span><span class="n">freezeframe_bottom</span><span class="p">,</span>
                                      <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">point_warning_strvar</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_warning</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.display_rounding">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.display_rounding">[docs]</a>
    <span class="k">def</span> <span class="nf">display_rounding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">col</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a rounded value based on which variable the value belongs to.</span>
<span class="sd">        Uses rounding amount specified in data_info&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">format</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;rounding&quot;</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="o">+</span> <span class="n">extra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;f&quot;</span><span class="p">)</span></div>


<span class="c1"># ----------------------</span>
<span class="c1"># Popup related functions</span>

<div class="viewcode-block" id="AviaryMissionEditor.close_popup">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.close_popup">[docs]</a>
    <span class="k">def</span> <span class="nf">close_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to close existing popup and refocus main window&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">focus_set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.generic_popup">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.generic_popup">[docs]</a>
    <span class="k">def</span> <span class="nf">generic_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pop_title</span><span class="o">=</span><span class="s2">&quot;Popup&quot;</span><span class="p">,</span> <span class="n">buttons_text</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to create a base window for a popup. Returns popup object to be used for adding widget</span>
<span class="sd">            and configuring settings. Buttons_text can be used to specify any number of buttons. These button</span>
<span class="sd">            objects are returned for configuring commands and location.&quot;&quot;&quot;</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Toplevel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># Set the window icon, provides 2 sizes of logos to prevent blurry icons</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">iconphoto</span><span class="p">(</span>
            <span class="kc">False</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span>
                <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_directory</span><span class="p">,</span> <span class="s2">&quot;aviary_logo_16.png&quot;</span><span class="p">)),</span>
            <span class="n">tk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span>
                <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_directory</span><span class="p">,</span> <span class="s2">&quot;aviary_logo_32.png&quot;</span><span class="p">)))</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">resizable</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">pop_title</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">focus_set</span><span class="p">()</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">popup</span>

        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">)</span>

        <span class="n">popup_content_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span>
            <span class="n">popup</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
        <span class="n">popup_content_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">button_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
        <span class="n">button_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="n">buttons</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># button width based on longest button string</span>
        <span class="n">button_width</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">buttons_text</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">))</span><span class="o">+</span><span class="mi">5</span>

        <span class="k">for</span> <span class="n">button_txt</span> <span class="ow">in</span> <span class="n">buttons_text</span><span class="p">:</span>
            <span class="n">button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                <span class="n">button_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">button_txt</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span>
                <span class="n">width</span><span class="o">=</span><span class="n">button_width</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                <span class="p">[</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="s2">&quot;light&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">macOS</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                <span class="p">[</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Enter&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_enter</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Leave&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_leave</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">buttons</span><span class="p">[</span><span class="n">button_txt</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>

        <span class="k">return</span> <span class="n">popup</span><span class="p">,</span> <span class="n">popup_content_frame</span><span class="p">,</span> <span class="n">buttons</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.place_popup">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.place_popup">[docs]</a>
    <span class="k">def</span> <span class="nf">place_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generic popup lets Tkinter automatically size the popup to fit all contents.</span>
<span class="sd">            This function uses that size and main GUI window size/location to compute a </span>
<span class="sd">            location for the popup that is central to the GUI.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">update_idletasks</span><span class="p">()</span>
        <span class="n">pop_wid</span><span class="p">,</span> <span class="n">pop_hei</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">winfo_geometry</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)]</span>
        <span class="n">win_size</span><span class="p">,</span> <span class="n">win_left</span><span class="p">,</span> <span class="n">win_top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">winfo_geometry</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
        <span class="n">win_wid</span><span class="p">,</span> <span class="n">win_hei</span> <span class="o">=</span> <span class="n">win_size</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
        <span class="n">win_left</span><span class="p">,</span> <span class="n">win_top</span><span class="p">,</span> <span class="n">win_wid</span><span class="p">,</span> <span class="n">win_hei</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
            <span class="n">win_left</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">win_top</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">win_wid</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">win_hei</span><span class="p">)</span>
        <span class="n">pop_left</span><span class="p">,</span> <span class="n">pop_top</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">win_left</span> <span class="o">+</span> <span class="n">win_wid</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">pop_wid</span> <span class="o">/</span>
                                <span class="mi">2</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">win_top</span> <span class="o">+</span> <span class="n">win_hei</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">pop_hei</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;+</span><span class="si">{</span><span class="n">pop_left</span><span class="si">}</span><span class="s2">+</span><span class="si">{</span><span class="n">pop_top</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.change_axes_popup">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.change_axes_popup">[docs]</a>
    <span class="k">def</span> <span class="nf">change_axes_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a popup window that allows user to edit axes limits. This function is triggered</span>
<span class="sd">            by the menu buttons&quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">reset_options</span><span class="p">(</span><span class="n">old_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">old_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># if resetting to bring data into view</span>
                    <span class="n">old_list</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">val_list</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
                        <span class="n">old_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">val_list</span><span class="p">)</span><span class="o">*</span><span class="mf">1.2</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">old_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info_defaults</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">]]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">lim_str</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                    <span class="nb">zip</span><span class="p">(</span><span class="n">old_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">])):</span>
                <span class="n">lim_str</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">display_rounding</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">i</span><span class="p">))</span>

        <span class="n">current_lims</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">lim</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="k">for</span> <span class="n">lim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">]]</span>

        <span class="n">popup</span><span class="p">,</span> <span class="n">content_frame</span><span class="p">,</span> <span class="n">buttons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generic_popup</span><span class="p">(</span>
            <span class="n">pop_title</span><span class="o">=</span><span class="s2">&quot;Axes Limits&quot;</span><span class="p">,</span> <span class="n">buttons_text</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">,</span> <span class="s2">&quot;reset&quot;</span><span class="p">,</span> <span class="s2">&quot;cancel&quot;</span><span class="p">])</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">reset_options</span><span class="p">(</span><span class="n">current_lims</span><span class="p">)])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="c1"># allow columns to expand in frame</span>
            <span class="n">content_frame</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">lim_str</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">])):</span>
            <span class="n">lim_str</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">display_rounding</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">lim_str</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span> <span class="n">col</span><span class="o">=</span><span class="n">row</span><span class="p">))</span>
            <span class="n">lim_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">content_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span>
                <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">lim_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
            <span class="n">lim_entry</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">content_frame</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">lim_str</span><span class="p">,</span>
                                 <span class="n">width</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lim_str</span><span class="o">.</span><span class="n">get</span><span class="p">())),</span>
                                 <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                                 <span class="p">[</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                                 <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                                 <span class="p">[</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">lim_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># apply uses values in entry boxes, reset defaults to original limits, cancel uses previously set limits</span>
        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_axes</span><span class="p">(</span><span class="n">limits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">True</span><span class="p">)])</span>
        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;reset&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(</span>
        <span class="p">),</span> <span class="n">reset_options</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_axes</span><span class="p">(</span><span class="n">limits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">True</span><span class="p">)])</span>
        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;cancel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">reset_options</span><span class="p">(</span>
            <span class="n">current_lims</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_axes</span><span class="p">(</span><span class="n">limits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">True</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">place_popup</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.get_phase_names">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.get_phase_names">[docs]</a>
    <span class="k">def</span> <span class="nf">get_phase_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of phase names, these are decided based on final and starting altitudes.</span>
<span class="sd">        These names are only used for the dropdown menu in advanced options, and are not connected to</span>
<span class="sd">        phase info phase names.&quot;&quot;&quot;</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Climb &quot;</span><span class="p">,</span> <span class="s2">&quot;Cruise &quot;</span><span class="p">,</span> <span class="s2">&quot;Descent &quot;</span><span class="p">]</span>
        <span class="n">counters</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">phase_name_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">nextpt</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;rounding&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()))</span>
            <span class="n">nowpt</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;rounding&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()))</span>
            <span class="k">if</span> <span class="n">nextpt</span> <span class="o">&gt;</span> <span class="n">nowpt</span><span class="p">:</span>
                <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">nextpt</span> <span class="o">&lt;</span> <span class="n">nowpt</span><span class="p">:</span>
                <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="n">phase_name_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">counters</span><span class="p">[</span><span class="n">j</span><span class="p">]))</span>
            <span class="n">counters</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">phase_name_list</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.advanced_options_popup">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.advanced_options_popup">[docs]</a>
    <span class="k">def</span> <span class="nf">advanced_options_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a popup window that allows user to edit advanced options for phase info. </span>
<span class="sd">        Options included are specified as a dict in __init__ and include solve/constrain for range,</span>
<span class="sd">        include landing/takeoff, polynomial order, and phase order. This function is triggered by the menu buttons&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">reset_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old_dict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">advanced_options_defaults</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">old_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_order_default</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">current_info</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># this stores option values as they are before user edits inside popup</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">current_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="n">popup</span><span class="p">,</span> <span class="n">content_frame</span><span class="p">,</span> <span class="n">buttons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generic_popup</span><span class="p">(</span>
            <span class="n">pop_title</span><span class="o">=</span><span class="s2">&quot;Advanced Options&quot;</span><span class="p">,</span> <span class="n">buttons_text</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">,</span> <span class="s2">&quot;reset&quot;</span><span class="p">,</span> <span class="s2">&quot;cancel&quot;</span><span class="p">])</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">reset_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_info</span><span class="p">)])</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">content_frame</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="p">(</span><span class="n">option_label_txt</span><span class="p">,</span> <span class="n">option_var</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">option_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">content_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">option_label_txt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span>
                <span class="n">justify</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                <span class="p">[</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">option_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">())</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="n">option_var</span><span class="p">):</span>
                <span class="n">option_checkbox</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Checkbutton</span><span class="p">(</span>
                    <span class="n">content_frame</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="n">option_var</span><span class="p">,</span>
                    <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                    <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">],</span>
                    <span class="n">activebackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                    <span class="n">activeforeground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">],</span>
                    <span class="n">selectcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                    <span class="n">highlightbackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                    <span class="n">highlightcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">])</span>
                <span class="n">option_checkbox</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">())</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="n">option_var</span><span class="p">):</span>
                <span class="n">option_entry</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span>
                    <span class="n">content_frame</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">option_var</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                    <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                    <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
                <span class="n">option_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">set_var</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
            <span class="n">phase_idx</span> <span class="o">=</span> <span class="n">order_combo</span><span class="o">.</span><span class="n">current</span><span class="p">()</span>
            <span class="n">order_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span><span class="p">[</span><span class="n">phase_idx</span><span class="p">])</span>

        <span class="k">def</span> <span class="nf">change_var</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
            <span class="n">phase_idx</span> <span class="o">=</span> <span class="n">order_combo</span><span class="o">.</span><span class="n">current</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">newval</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">order_var</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">newval</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_default</span><span class="p">:</span>
                <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Phase transcription order must be &quot;</span> <span class="o">+</span>
                    <span class="s2">&quot;at least </span><span class="si">{self.phase_order_default}</span><span class="s2">!&quot;</span><span class="p">)</span>
                <span class="n">newval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_default</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span><span class="p">[</span><span class="n">phase_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">newval</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">order_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">content_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Phase Transcription Order: &quot;</span><span class="p">,</span>
                <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">order_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
            <span class="n">order_combo</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Combobox</span><span class="p">(</span>
                <span class="n">content_frame</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;readonly&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_phase_names</span><span class="p">(),</span> <span class="n">width</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
            <span class="n">order_combo</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;&lt;ComboboxSelected&gt;&gt;&quot;</span><span class="p">,</span> <span class="n">set_var</span><span class="p">)</span>
            <span class="n">order_combo</span><span class="o">.</span><span class="n">current</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">order_combo</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">order_var</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_order_default</span><span class="p">)</span>
            <span class="n">order_entry</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span>
                <span class="n">content_frame</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">order_var</span><span class="p">,</span>
                <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">order_entry</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;KeyRelease&gt;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">change_var</span><span class="p">)</span>
            <span class="n">order_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># apply maintains user options as set by user in popup, reset reverts them to default values, cancel reverts to</span>
        <span class="c1"># values as they were at the start of the popup</span>
        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">())</span>
        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;reset&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">reset_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)])</span>
        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;cancel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">reset_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_info</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">place_popup</span><span class="p">()</span></div>


<span class="c1"># ----------------------</span>
<span class="c1"># Menu related functions</span>
<div class="viewcode-block" id="AviaryMissionEditor.create_menu">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.create_menu">[docs]</a>
    <span class="k">def</span> <span class="nf">create_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates menu. Structure is specified as a dictionary, can add commands, </span>
<span class="sd">        separators, and checkbuttons.&quot;&quot;&quot;</span>
        <span class="n">structure</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;File&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Open Phase Info..&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">open_phase_info</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Save Phase Info&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Save Phase Info as..&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_as</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;separator&quot;</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_window</span><span class="p">]],</span>
                     <span class="s2">&quot;Edit&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Axes Limits&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_axes_popup</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Units&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_units</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Rounding&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_rounding</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;checkbutton&quot;</span><span class="p">,</span> <span class="s2">&quot;Store Settings?&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">remind_store_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_settings</span><span class="p">]],</span>
                     <span class="s2">&quot;View&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;checkbutton&quot;</span><span class="p">,</span> <span class="s2">&quot;Optimize Phase&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toggle_optimize_view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_optimize</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;checkbutton&quot;</span><span class="p">,</span> <span class="s2">&quot;Phase Slopes&quot;</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">toggle_phase_slope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_phase_slope</span><span class="p">],</span>
                              <span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Advanced Options&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options_popup</span><span class="p">]],</span>
                     <span class="s2">&quot;Help&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructions&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_instructions</span><span class="p">]]}</span>

        <span class="n">menu_bar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tab_label</span><span class="p">,</span> <span class="n">tab_list</span> <span class="ow">in</span> <span class="n">structure</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">tab</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span>
                <span class="n">menu_bar</span><span class="p">,</span> <span class="n">tearoff</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">]</span>
                <span class="p">[</span><span class="s1">&#39;background_primary&#39;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s1">&#39;foreground_primary&#39;</span><span class="p">],</span>
                <span class="n">activebackground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s1">&#39;hover&#39;</span><span class="p">])</span>
            <span class="n">menu_bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">tab_label</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">tab</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">tab_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;separator&quot;</span><span class="p">:</span>
                    <span class="n">tab</span><span class="o">.</span><span class="n">add_separator</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;command&quot;</span><span class="p">:</span>
                    <span class="n">tab</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">command</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;checkbutton&quot;</span><span class="p">:</span>
                    <span class="n">tab</span><span class="o">.</span><span class="n">add_checkbutton</span><span class="p">(</span>
                        <span class="n">label</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                        <span class="n">command</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                        <span class="n">variable</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                        <span class="n">selectcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s1">&#39;foreground_primary&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">menu</span><span class="o">=</span><span class="n">menu_bar</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.temporary_notice">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.temporary_notice">[docs]</a>
    <span class="k">def</span> <span class="nf">temporary_notice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Under Development&quot;</span><span class="p">,</span>
                            <span class="n">message</span><span class="o">=</span><span class="s2">&quot;This section is currently under development!&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.close_window">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.close_window">[docs]</a>
    <span class="k">def</span> <span class="nf">close_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Closes main window and saves persistent settings into a binary pickle file.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_settings</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>  <span class="c1"># if user wants to store settings</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">persist_filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">({</span><span class="s1">&#39;window_geometry&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">winfo_geometry</span><span class="p">(),</span>
                          <span class="s1">&#39;theme&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">},</span> <span class="n">fp</span><span class="p">)</span>
        <span class="c1"># if user doesn&#39;t want to store settings and file exists</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">persist_filename</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">persist_filename</span><span class="p">)</span>  <span class="c1"># remove file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.toggle_optimize_view">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.toggle_optimize_view">[docs]</a>
    <span class="k">def</span> <span class="nf">toggle_optimize_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs update table with overwrite on to toggle display of optimize checkboxes&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.toggle_phase_slope">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.toggle_phase_slope">[docs]</a>
    <span class="k">def</span> <span class="nf">toggle_phase_slope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">redraw</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_phase_slope</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="n">y_lims</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">:]]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">):</span>
                    <span class="n">xs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">ys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>
                    <span class="c1"># offset from line by 8% of y limit</span>
                    <span class="n">text_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">xs</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span><span class="o">+</span><span class="n">y_lims</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span>

                    <span class="c1"># find slope and attach units if either unit is not unitless</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">slope</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_rounding</span><span class="p">(</span>
                            <span class="p">(</span><span class="n">ys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">ys</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">xs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
                        <span class="n">slope</span> <span class="o">=</span> <span class="s2">&quot;undefined&quot;</span>
                    <span class="n">xunit</span><span class="p">,</span> <span class="n">yunit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">yunit</span> <span class="o">!=</span> <span class="s2">&quot;unitless&quot;</span> <span class="ow">and</span> <span class="n">xunit</span> <span class="o">!=</span> <span class="s2">&quot;unitless&quot;</span><span class="p">:</span>
                        <span class="n">slope</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">slope</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">yunit</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">xunit</span><span class="si">}</span><span class="s2">&quot;</span>

                    <span class="c1"># matplotlib text angle is in display units, so use transform to find angle</span>
                    <span class="n">scaled_pt1</span><span class="p">,</span> <span class="n">scaled_pt2</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                            <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">)]</span>
                    <span class="n">line_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span>
                        <span class="n">scaled_pt2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">scaled_pt1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">scaled_pt2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">scaled_pt1</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

                    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">[</span><span class="n">j</span><span class="p">]):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                            <span class="n">text</span><span class="o">=</span><span class="n">slope</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">text_position</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">line_angle</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
                                <span class="n">slope</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">text_position</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">line_angle</span><span class="p">,</span>
                                <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                                <span class="n">rotation_mode</span><span class="o">=</span><span class="s1">&#39;anchor&#39;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">]))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_bbox</span><span class="p">(</span>
                        <span class="nb">dict</span><span class="p">(</span>
                            <span class="n">facecolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_phase_slope</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">text_list</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">text_list</span><span class="p">:</span>
                    <span class="n">text</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_texts</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">redraw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.show_instructions">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.show_instructions">[docs]</a>
    <span class="k">def</span> <span class="nf">show_instructions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows a messagebox with instructions to use this utility.&quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;This tool can be used to design a mission which can be used by Aviary for modelling and optimization.</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                  <span class="s2">&quot;To begin, start by adding points to the Altitude Plot, Mach Plot, or the table on the right.</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                  <span class="s2">&quot;Points can be edited by dragging points on the plot or editing the table values. Points can be deleted &quot;</span> <span class="o">+</span>\
                  <span class="s2">&quot;with the &#39;X&#39; button adjacent to each point on the table.</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                  <span class="s2">&quot;Use &#39;Edit&#39;-&gt;&#39;Axes Limits&#39; to change the axes limits.</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                  <span class="s2">&quot;Use &#39;View&#39;-&gt;&#39;Optimize Phase&#39; to add the option to optimize any mission phase.</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                  <span class="s2">&quot;Use &#39;View&#39;-&gt;&#39;Phase Slopes&#39; to toggle climb/descent rate information on the plots.</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                  <span class="s2">&quot;Use &#39;View&#39;-&gt;&#39;Advanced Options&#39; to edit additional options related to the mission and optimization.</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                  <span class="s2">&quot;If you would like to save window size, location, and theme information for subsequent runs, toggle &#39;Edit&#39;-&gt;&#39;Store Settings?&#39;&quot;</span>
        <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Mission Design Instructions&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.remind_store_settings">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.remind_store_settings">[docs]</a>
    <span class="k">def</span> <span class="nf">remind_store_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;be&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_settings</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;not be&quot;</span>
        <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Store Settings&quot;</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Settings related to window location, size, and theme will </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2"> stored!&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.change_units">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.change_units">[docs]</a>
    <span class="k">def</span> <span class="nf">change_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">popup</span><span class="p">,</span> <span class="n">content_frame</span><span class="p">,</span> <span class="n">buttons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generic_popup</span><span class="p">(</span>
            <span class="n">pop_title</span><span class="o">=</span><span class="s2">&quot;Change Units&quot;</span><span class="p">,</span> <span class="n">buttons_text</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">,</span> <span class="s2">&quot;cancel&quot;</span><span class="p">])</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">()])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">content_frame</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">set_var</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">][</span><span class="n">row</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">unit_combos</span><span class="p">[</span><span class="n">row</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

        <span class="k">def</span> <span class="nf">reset_units_strvar</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">unit</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">old_units</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>

        <span class="c1"># this creates a copy instead of a reference</span>
        <span class="n">old_units</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">]]</span>
        <span class="n">unit_combos</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">avail_units</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;h&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;km&quot;</span><span class="p">,</span> <span class="s2">&quot;ft&quot;</span><span class="p">,</span> <span class="s2">&quot;mi&quot;</span><span class="p">,</span> <span class="s2">&quot;nmi&quot;</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="p">(</span><span class="n">var_label</span><span class="p">,</span> <span class="n">var_unit</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">])):</span>
            <span class="k">if</span> <span class="n">var_unit</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;unitless&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">unit_type</span> <span class="ow">in</span> <span class="n">avail_units</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">var_unit</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="ow">in</span> <span class="n">unit_type</span><span class="p">:</span>
                        <span class="n">unit_list</span> <span class="o">=</span> <span class="n">unit_type</span>

                <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">content_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">var_label</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span>
                         <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                         <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
                    <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
                <span class="n">unit_combos</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Combobox</span><span class="p">(</span>
                    <span class="n">content_frame</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">unit_list</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;readonly&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
                <span class="n">unit_combos</span><span class="p">[</span><span class="n">row</span><span class="p">]</span><span class="o">.</span><span class="n">current</span><span class="p">(</span><span class="n">unit_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">var_unit</span><span class="o">.</span><span class="n">get</span><span class="p">()))</span>
                <span class="n">unit_combos</span><span class="p">[</span><span class="n">row</span><span class="p">]</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;&lt;ComboboxSelected&gt;&gt;&quot;</span><span class="p">,</span>
                                      <span class="k">lambda</span> <span class="n">e</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">:</span> <span class="n">set_var</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>
                <span class="n">unit_combos</span><span class="p">[</span><span class="n">row</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">apply_units</span><span class="p">():</span>
            <span class="n">new_headers</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">unit</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">])]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_header</span><span class="p">(</span><span class="n">new_headers</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="p">(</span><span class="n">old_unit</span><span class="p">,</span> <span class="n">new_unit</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">rounding</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                <span class="nb">zip</span><span class="p">(</span>
                    <span class="n">old_units</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;rounding&quot;</span><span class="p">])):</span>
                <span class="n">new_lim</span> <span class="o">=</span> <span class="n">convert_units</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">limit</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span>
                                        <span class="n">old_units</span><span class="o">=</span><span class="n">old_unit</span><span class="p">,</span> <span class="n">new_units</span><span class="o">=</span><span class="n">new_unit</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="n">limit</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">new_lim</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]):</span>
                    <span class="n">new_val</span> <span class="o">=</span> <span class="n">convert_units</span><span class="p">(</span>
                        <span class="n">val</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">old_units</span><span class="o">=</span><span class="n">old_unit</span><span class="p">,</span> <span class="n">new_units</span><span class="o">=</span><span class="n">new_unit</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">new_val</span><span class="p">)</span>
                <span class="n">num_digs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">new_lim</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">rounding</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span> <span class="k">if</span> <span class="n">num_digs</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="k">else</span> <span class="mi">2</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">update_axes</span><span class="p">(</span><span class="n">limits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plot</span><span class="p">()</span>
            <span class="n">bool_list</span> <span class="o">=</span> <span class="p">[[</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">axis</span><span class="p">]</span> <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bool_list</span><span class="o">=</span><span class="n">bool_list</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_phase_slope</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_phase_slope</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">toggle_phase_slope</span><span class="p">(</span><span class="n">redraw</span><span class="o">=</span><span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">apply_units</span><span class="p">()])</span>
        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;cancel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">reset_units_strvar</span><span class="p">()])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">place_popup</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.change_rounding">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.change_rounding">[docs]</a>
    <span class="k">def</span> <span class="nf">change_rounding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">popup</span><span class="p">,</span> <span class="n">content_frame</span><span class="p">,</span> <span class="n">buttons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generic_popup</span><span class="p">(</span>
            <span class="n">pop_title</span><span class="o">=</span><span class="s2">&quot;Rounding Options&quot;</span><span class="p">,</span> <span class="n">buttons_text</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">,</span> <span class="s2">&quot;cancel&quot;</span><span class="p">])</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">()])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="c1"># allow columns to expand in frame</span>
            <span class="n">content_frame</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">apply_rounding</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">cancel_rounding</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">changed</span><span class="p">,</span> <span class="n">old</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;rounding&quot;</span><span class="p">],</span> <span class="n">current_rounding</span><span class="p">):</span>
                <span class="n">changed</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">old</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

        <span class="n">current_rounding</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;rounding&quot;</span><span class="p">]]</span>

        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">round_str</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;rounding&quot;</span><span class="p">])):</span>
            <span class="n">round_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">content_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span>
                <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">round_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
            <span class="n">round_entry</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span>
                <span class="n">content_frame</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">round_str</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span>
                    <span class="mi">4</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">round_str</span><span class="o">.</span><span class="n">get</span><span class="p">())),</span>
                <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;background_primary&quot;</span><span class="p">],</span>
                <span class="n">foreground</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;foreground_primary&quot;</span><span class="p">])</span>
            <span class="n">round_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">apply_rounding</span><span class="p">()])</span>
        <span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;cancel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">close_popup</span><span class="p">(),</span> <span class="n">cancel_rounding</span><span class="p">()])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">place_popup</span><span class="p">()</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.open_phase_info">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.open_phase_info">[docs]</a>
    <span class="k">def</span> <span class="nf">open_phase_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Opens a dialog box to select a .py file with a phase info dict. File must contain a dict called phase_info. </span>
<span class="sd">            File can be placed in any directory.&quot;&quot;&quot;</span>
        <span class="n">file_dialog</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;Python files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.py&quot;</span><span class="p">)])</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">file_dialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="c1"># imports file similar to how a module is imported, allowing direct access to variables</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">spec_from_file_location</span><span class="p">(</span><span class="s2">&quot;module_name&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">module_from_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
            <span class="n">spec</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">exec_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
            <span class="n">phase_info</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">phase_info</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">phase_info</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;Python File does not contain a global dictionary called phase_info!&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">phase_info</span><span class="p">:</span>
                <span class="n">init</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">ylabs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;altitude&quot;</span><span class="p">,</span> <span class="s2">&quot;mach&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">units</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span>
                <span class="k">for</span> <span class="n">phase_dict</span> <span class="ow">in</span> <span class="p">(</span><span class="n">phase_info</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="s2">&quot;initial_guesses&quot;</span> <span class="ow">in</span> <span class="n">phase_dict</span><span class="p">:</span>  <span class="c1"># not a pre/post mission dict</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;solve_for_distance&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                            <span class="n">value</span><span class="o">=</span><span class="n">phase_dict</span><span class="p">[</span><span class="s2">&quot;user_options&quot;</span><span class="p">][</span><span class="s2">&quot;solve_for_distance&quot;</span><span class="p">])</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;polynomial_control_order&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                            <span class="n">value</span><span class="o">=</span><span class="n">phase_dict</span><span class="p">[</span><span class="s2">&quot;user_options&quot;</span><span class="p">][</span><span class="s2">&quot;polynomial_control_order&quot;</span><span class="p">])</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">phase_dict</span><span class="p">[</span><span class="s2">&quot;user_options&quot;</span><span class="p">][</span><span class="s2">&quot;order&quot;</span><span class="p">])</span>

                        <span class="n">timevals</span><span class="p">,</span> <span class="n">units</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">phase_dict</span><span class="p">[</span><span class="s2">&quot;initial_guesses&quot;</span><span class="p">][</span><span class="s2">&quot;time&quot;</span><span class="p">]</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">init</span><span class="p">:</span>  <span class="c1"># for first run initialize internal lists with correct num of elements</span>
                            <span class="n">numpts</span> <span class="o">=</span> <span class="n">phase_dict</span><span class="p">[</span><span class="s2">&quot;user_options&quot;</span><span class="p">][</span><span class="s2">&quot;num_segments&quot;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">numpts</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
                            <span class="n">bool_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">numpts</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                                         <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">)]</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">timevals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">):</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">units</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span>
                                                         <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">phase_dict</span><span class="p">[</span><span class="s2">&quot;user_options&quot;</span><span class="p">][</span><span class="s2">&quot;initial_&quot;</span><span class="o">+</span><span class="n">ylabs</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                            <span class="n">init</span> <span class="o">=</span> <span class="kc">True</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timevals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timevals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">idx</span> <span class="o">+</span>
                                           <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">phase_dict</span><span class="p">[</span><span class="s2">&quot;user_options&quot;</span><span class="p">][</span><span class="s2">&quot;final_&quot;</span><span class="o">+</span><span class="n">ylabs</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">bool_list</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">phase_dict</span><span class="p">[</span><span class="s2">&quot;user_options&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;optimize_&quot;</span> <span class="o">+</span> <span class="n">ylabs</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>

                        <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;constrain_range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">phase_info</span><span class="p">[</span><span class="s2">&quot;post_mission&quot;</span><span class="p">][</span><span class="s2">&quot;constrain_range&quot;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;include_landing&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">phase_info</span><span class="p">[</span><span class="s2">&quot;post_mission&quot;</span><span class="p">][</span><span class="s2">&quot;include_landing&quot;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;include_takeoff&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">phase_info</span><span class="p">[</span><span class="s2">&quot;pre_mission&quot;</span><span class="p">][</span><span class="s2">&quot;include_takeoff&quot;</span><span class="p">])</span>

                <span class="c1"># checks if any optimize values are true, in which case checkboxes are shown</span>
                <span class="k">for</span> <span class="n">axis_list</span> <span class="ow">in</span> <span class="n">bool_list</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">bool_var</span> <span class="ow">in</span> <span class="n">axis_list</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">bool_var</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">show_optimize</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                            <span class="k">break</span>
                <span class="n">lim_margin</span> <span class="o">=</span> <span class="mf">1.2</span>
                <span class="n">limits</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">*</span><span class="n">lim_margin</span> <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">lim</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;limits&quot;</span><span class="p">],</span> <span class="n">limits</span><span class="p">):</span>
                    <span class="n">var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">lim</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">str_var</span><span class="p">,</span> <span class="n">unit</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">],</span> <span class="n">units</span><span class="p">):</span>
                    <span class="n">str_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_axes</span><span class="p">(</span><span class="n">limits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plot</span><span class="p">()</span>
                <span class="n">new_headers</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">unit</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">])]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_header</span><span class="p">(</span><span class="n">new_headers</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bool_list</span><span class="o">=</span><span class="n">bool_list</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.save_as">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.save_as">[docs]</a>
    <span class="k">def</span> <span class="nf">save_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a file dialog that saves as a phase info. User can specify filename and location.&quot;&quot;&quot;</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
            <span class="n">defaultextension</span><span class="o">=</span><span class="s1">&#39;.py&#39;</span><span class="p">,</span> <span class="n">confirmoverwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;Python files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.py&quot;</span><span class="p">)],</span>
            <span class="n">initialfile</span><span class="o">=</span><span class="s1">&#39;outputted_phase_info&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div>


<div class="viewcode-block" id="AviaryMissionEditor.save">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.save">[docs]</a>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves mission into a file as a phase info dictionary which can be used by Aviary.</span>
<span class="sd">        This function is also called by the save as function with a non-default filename. &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># going backwards in time</span>
                <span class="n">messagebox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Time Travel Error&quot;</span><span class="p">,</span>
                    <span class="n">message</span><span class="o">=</span><span class="s2">&quot;All mission points must go forwards in time! Edit points and try again.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="n">low_mach</span> <span class="o">=</span> <span class="mf">0.25</span>
        <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">low_mach</span><span class="p">:</span>  <span class="c1"># low mach value in mission</span>
            <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Low mach values (below </span><span class="si">{</span><span class="n">low_mach</span><span class="si">}</span><span class="s2">) can cause issues with FLOPS based models.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                <span class="s2">&quot;Would you like to continue saving this mission?&quot;</span>
            <span class="n">continue_saving</span> <span class="o">=</span> <span class="n">messagebox</span><span class="o">.</span><span class="n">askyesno</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Low Mach Values&quot;</span><span class="p">,</span>
                                                  <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">continue_saving</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="n">users</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;solve_for_distance&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;solve_for_distance&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                 <span class="s1">&#39;constrain_range&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;constrain_range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                 <span class="s1">&#39;include_takeoff&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;include_takeoff&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                 <span class="s1">&#39;include_landing&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;include_landing&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()}</span>
        <span class="n">polyord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_options</span><span class="p">[</span><span class="s2">&quot;polynomial_control_order&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_dep_vars</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">tk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">()]</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s1">&#39;outputted_phase_info.py&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">axis</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axis</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_rounding</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">j</span><span class="p">))</span>

        <span class="n">create_phase_info</span><span class="p">(</span>
            <span class="n">times</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">altitudes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">mach_values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">units</span><span class="o">=</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_info</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">]],</span>
            <span class="n">polynomial_order</span><span class="o">=</span><span class="n">polyord</span><span class="p">,</span> <span class="n">num_segments</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">optimize_altitude_phase_vars</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">optimize_mach_phase_vars</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">table_boolvars</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">user_choices</span><span class="o">=</span><span class="n">users</span><span class="p">,</span> <span class="n">orders</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_order_list</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close_window</span><span class="p">()</span></div>


    <span class="c1"># button hover color functions</span>
<div class="viewcode-block" id="AviaryMissionEditor.on_enter">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.on_enter">[docs]</a>
    <span class="k">def</span> <span class="nf">on_enter</span><span class="p">(</span></div>

        <span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span> <span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span><span class="s2">&quot;hover&quot;</span><span class="p">]</span>

<div class="viewcode-block" id="AviaryMissionEditor.on_leave">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.AviaryMissionEditor.on_leave">[docs]</a>
    <span class="k">def</span> <span class="nf">on_leave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span> <span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pallete</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">][</span></div>

        <span class="s2">&quot;background_primary&quot;</span><span class="p">]</span></div>



<div class="viewcode-block" id="create_phase_info">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.create_phase_info">[docs]</a>
<span class="k">def</span> <span class="nf">create_phase_info</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">altitudes</span><span class="p">,</span> <span class="n">mach_values</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span>
                      <span class="n">polynomial_order</span><span class="p">,</span> <span class="n">num_segments</span><span class="p">,</span> <span class="n">optimize_mach_phase_vars</span><span class="p">,</span>
                      <span class="n">optimize_altitude_phase_vars</span><span class="p">,</span> <span class="n">user_choices</span><span class="p">,</span>
                      <span class="n">orders</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;outputted_phase_info.py&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a dictionary containing the information about different flight phases</span>
<span class="sd">    based on input times, altitudes, and Mach values.</span>

<span class="sd">    The information includes details such as duration bounds, initial guesses,</span>
<span class="sd">    and various options for optimization and control for each phase.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    times : list of float</span>
<span class="sd">        The times at which phase changes occur, given in minutes.</span>
<span class="sd">    altitudes : list of float</span>
<span class="sd">        The altitudes corresponding to each phase, given in feet.</span>
<span class="sd">    mach_values : list of float</span>
<span class="sd">        The Mach numbers corresponding to each phase.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict</span>
<span class="sd">        A dictionary with all the phase information, including bounds and initial guesses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_phases</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">times</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># Number of phases is one less than the number of points</span>
    <span class="n">phase_info</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># times = np.round(np.array(times)).astype(int)</span>
    <span class="c1"># altitudes = np.round(np.array(altitudes) / 500) * 500</span>
    <span class="c1"># mach_values = np.round(np.array(mach_values), 2)</span>
    <span class="n">times</span><span class="p">,</span> <span class="n">altitudes</span><span class="p">,</span> <span class="n">mach_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="n">times</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">altitudes</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mach_values</span><span class="p">)</span>

    <span class="c1"># Utility function to create bounds</span>
    <span class="k">def</span> <span class="nf">create_bounds</span><span class="p">(</span><span class="n">center</span><span class="p">):</span>
        <span class="n">lower_bound</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">center</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>  <span class="c1"># Ensuring lower bound is not less than 0.1</span>
        <span class="n">upper_bound</span> <span class="o">=</span> <span class="n">center</span> <span class="o">*</span> <span class="mf">1.5</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">lower_bound</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">)</span>

    <span class="c1"># Calculate duration bounds for each phase</span>
    <span class="n">duration_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">create_bounds</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                       <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_phases</span><span class="p">)]</span>

    <span class="c1"># Initialize the cumulative initial bounds</span>
    <span class="n">cumulative_initial_bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)]</span>  <span class="c1"># Initial bounds for the first phase</span>

    <span class="c1"># Calculate the cumulative initial bounds for subsequent phases</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_phases</span><span class="p">):</span>
        <span class="n">previous_duration_bounds</span> <span class="o">=</span> <span class="n">duration_bounds</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">previous_initial_bounds</span> <span class="o">=</span> <span class="n">cumulative_initial_bounds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">new_initial_bound_min</span> <span class="o">=</span> <span class="n">previous_initial_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">previous_duration_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">new_initial_bound_max</span> <span class="o">=</span> <span class="n">previous_initial_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">previous_duration_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">cumulative_initial_bounds</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">new_initial_bound_min</span><span class="p">,</span> <span class="n">new_initial_bound_max</span><span class="p">))</span>

    <span class="c1"># Add pre_mission and post_mission phases</span>
    <span class="n">phase_info</span><span class="p">[</span><span class="s1">&#39;pre_mission&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;include_takeoff&#39;</span><span class="p">:</span> <span class="n">user_choices</span><span class="p">[</span><span class="s2">&quot;include_takeoff&quot;</span><span class="p">],</span>
        <span class="s1">&#39;optimize_mass&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">climb_count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">cruise_count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">descent_count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">alt_margin</span> <span class="o">=</span> <span class="n">convert_units</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="s2">&quot;ft&quot;</span><span class="p">,</span> <span class="n">units</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_phases</span><span class="p">):</span>
        <span class="n">initial_altitude</span> <span class="o">=</span> <span class="n">altitudes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">final_altitude</span> <span class="o">=</span> <span class="n">altitudes</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Determine phase type: climb, cruise, or descent</span>
        <span class="k">if</span> <span class="n">final_altitude</span> <span class="o">&gt;</span> <span class="n">initial_altitude</span><span class="p">:</span>
            <span class="n">phase_type</span> <span class="o">=</span> <span class="s1">&#39;climb&#39;</span>
            <span class="n">phase_count</span> <span class="o">=</span> <span class="n">climb_count</span>
            <span class="n">climb_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">final_altitude</span> <span class="o">==</span> <span class="n">initial_altitude</span><span class="p">:</span>
            <span class="n">phase_type</span> <span class="o">=</span> <span class="s1">&#39;cruise&#39;</span>
            <span class="n">phase_count</span> <span class="o">=</span> <span class="n">cruise_count</span>
            <span class="n">cruise_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">phase_type</span> <span class="o">=</span> <span class="s1">&#39;descent&#39;</span>
            <span class="n">phase_count</span> <span class="o">=</span> <span class="n">descent_count</span>
            <span class="n">descent_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">phase_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">phase_type</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">phase_count</span><span class="si">}</span><span class="s1">&#39;</span>

        <span class="n">phase_info</span><span class="p">[</span><span class="n">phase_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;subsystem_options&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;core_aerodynamics&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;computed&#39;</span><span class="p">}</span>
            <span class="p">},</span>
            <span class="s1">&#39;user_options&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;optimize_mach&#39;</span><span class="p">:</span> <span class="n">optimize_mach_phase_vars</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                <span class="s1">&#39;optimize_altitude&#39;</span><span class="p">:</span> <span class="n">optimize_altitude_phase_vars</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                <span class="s1">&#39;polynomial_control_order&#39;</span><span class="p">:</span> <span class="n">polynomial_order</span><span class="p">,</span>
                <span class="s1">&#39;use_polynomial_control&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;num_segments&#39;</span><span class="p">:</span> <span class="n">num_segments</span><span class="p">,</span>
                <span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="n">orders</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                <span class="s1">&#39;solve_for_distance&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;initial_mach&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">mach_values</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">units</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                <span class="s1">&#39;final_mach&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">mach_values</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">units</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                <span class="s1">&#39;mach_bounds&#39;</span><span class="p">:</span> <span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">mach_values</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">])</span> <span class="o">-</span> <span class="mf">0.02</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">mach_values</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="mf">0.02</span><span class="p">),</span> <span class="n">units</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                <span class="s1">&#39;initial_altitude&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">altitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">units</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="s1">&#39;final_altitude&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">altitudes</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">units</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="s1">&#39;altitude_bounds&#39;</span><span class="p">:</span> <span class="p">((</span><span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">altitudes</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">])</span> <span class="o">-</span> <span class="n">alt_margin</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">altitudes</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="n">alt_margin</span><span class="p">),</span> <span class="n">units</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="s1">&#39;throttle_enforcement&#39;</span><span class="p">:</span> <span class="s1">&#39;path_constraint&#39;</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_phases</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;boundary_constraint&#39;</span><span class="p">,</span>
                <span class="s1">&#39;fix_initial&#39;</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;constrain_final&#39;</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_phases</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;fix_duration&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;initial_bounds&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">cumulative_initial_bounds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">units</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="s1">&#39;duration_bounds&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">duration_bounds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">units</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="p">},</span>
            <span class="s1">&#39;initial_guesses&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="p">([</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">units</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="n">phase_info</span><span class="p">[</span><span class="s1">&#39;post_mission&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;include_landing&#39;</span><span class="p">:</span> <span class="n">user_choices</span><span class="p">[</span><span class="s2">&quot;include_landing&quot;</span><span class="p">],</span>
        <span class="s1">&#39;constrain_range&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;target_range&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="s1">&#39;nmi&#39;</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="c1"># Apply user choices to each phase</span>
    <span class="k">for</span> <span class="n">phase_name</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">phase_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="s1">&#39;pre_mission&#39;</span> <span class="ow">in</span> <span class="n">phase_name</span> <span class="ow">or</span> <span class="s1">&#39;post_mission&#39;</span> <span class="ow">in</span> <span class="n">phase_name</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">phase_info</span><span class="p">[</span><span class="n">phase_name</span><span class="p">][</span><span class="s1">&#39;user_options&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s1">&#39;solve_for_distance&#39;</span><span class="p">:</span> <span class="n">user_choices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;solve_for_distance&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="p">})</span>

    <span class="c1"># Apply global settings if required</span>
    <span class="n">phase_info</span><span class="p">[</span><span class="s1">&#39;post_mission&#39;</span><span class="p">][</span><span class="s1">&#39;constrain_range&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_choices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s1">&#39;constrain_range&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Calculate the total range</span>
    <span class="n">total_range</span><span class="p">,</span> <span class="n">range_unit</span> <span class="o">=</span> <span class="n">estimate_total_range_trapezoidal</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">mach_values</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Total range is estimated to be </span><span class="si">{</span><span class="n">total_range</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">range_unit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">phase_info</span><span class="p">[</span><span class="s1">&#39;post_mission&#39;</span><span class="p">][</span><span class="s1">&#39;target_range&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_range</span><span class="p">,</span> <span class="n">range_unit</span><span class="p">)</span>

    <span class="c1"># write a python file with the phase information</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;phase_info = </span><span class="si">{</span><span class="n">phase_info</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="c1"># Check for &#39;black&#39; and format the file</span>
    <span class="k">if</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s1">&#39;black&#39;</span><span class="p">):</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s1">&#39;autopep8&#39;</span><span class="p">):</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;autopep8&#39;</span><span class="p">,</span> <span class="s1">&#39;--in-place&#39;</span><span class="p">,</span> <span class="s1">&#39;--aggressive&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File formatted using &#39;autopep8&#39;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;black&#39; and &#39;autopep8&#39; are not installed. Please consider installing one of them for better formatting.&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Phase info has been saved and formatted in </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">phase_info</span></div>



<div class="viewcode-block" id="estimate_total_range_trapezoidal">
<a class="viewcode-back" href="../../../_srcdocs/packages/interface/graphical_input.html#aviary.interface.graphical_input.estimate_total_range_trapezoidal">[docs]</a>
<span class="k">def</span> <span class="nf">estimate_total_range_trapezoidal</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">mach_numbers</span><span class="p">,</span> <span class="n">units</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Source: original Aviary graphical_input.py.&quot;&quot;&quot;</span>
    <span class="n">speed_of_sound</span> <span class="o">=</span> <span class="mi">343</span>  <span class="c1"># Speed of sound in meters per second</span>

    <span class="c1"># convert time list into np array with units of seconds</span>
    <span class="n">times_sec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">convert_units</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">units</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">time</span> <span class="ow">in</span> <span class="n">times</span><span class="p">])</span>

    <span class="c1"># Calculate the speeds at each Mach number</span>
    <span class="n">speeds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mach_numbers</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed_of_sound</span>

    <span class="c1"># Use numpy&#39;s trapz function to integrate</span>
    <span class="n">total_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">trapz</span><span class="p">(</span><span class="n">speeds</span><span class="p">,</span> <span class="n">times_sec</span><span class="p">)</span>  <span class="c1"># in meters</span>
    <span class="n">range_unit</span> <span class="o">=</span> <span class="n">units</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="c1"># m and ft are small units for range, change to larger ones</span>
    <span class="k">if</span> <span class="n">range_unit</span> <span class="o">==</span> <span class="s2">&quot;m&quot;</span><span class="p">:</span>
        <span class="n">range_unit</span> <span class="o">=</span> <span class="s2">&quot;km&quot;</span>
    <span class="k">if</span> <span class="n">range_unit</span> <span class="o">==</span> <span class="s2">&quot;ft&quot;</span><span class="p">:</span>
        <span class="n">range_unit</span> <span class="o">=</span> <span class="s2">&quot;nmi&quot;</span>

    <span class="c1"># return range in the same units as altitude units</span>
    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">convert_units</span><span class="p">(</span><span class="n">total_range</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="n">range_unit</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="n">range_unit</span></div>



<span class="k">def</span> <span class="nf">_setup_flight_profile_parser</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set up the command line options for the Flight Profile plotting tool.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : argparse.ArgumentParser</span>
<span class="sd">        The parser instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">_exec_flight_profile</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">user_args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the Flight Profile plotting tool.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    options : argparse.Namespace</span>
<span class="sd">        Command line options.</span>
<span class="sd">    user_args : list of str</span>
<span class="sd">        Args to be passed to the user script.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">AviaryMissionEditor</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">AviaryMissionEditor</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Aviary team at NASA
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>